1、电脑打开，我的电脑本身是win8.1的系统，下载VirtualBox并安装

2、下载LEDE固件，PE下写盘或者转盘专用，解压放到D盘根目录

3、管理员权限运行CMD，然后用以下命令把img转成vbox能识别的虚拟硬盘。
cd C:\Program Files\Oracle\VirtualBox
VBoxManage convertdd D:\LEDE.img D:\LEDE.vdi
以上命令就会把img转换为vbox硬盘了，大家根据自己需要改盘符和固件名称即可

4、新建虚拟机
新建虚拟机：
名称：lede
类型：Linux
版本：other（64bit）
内存设定512MB以上吧，我是1G
硬盘选择已有硬盘，就是刚才咱们转换后的那个lede.vdi即可
网络，选择桥接已有的有线网卡，高级模式中选择混杂模式选择为全部允许。有无线网卡得，也可以增加第二网卡，也是桥接无线网卡。

5、虚拟机开机后，按enter
通过以下命令修改lede的ip为 192.168.1.2
vi  /etc/config/network
然后按esc，输入 :wq
然后输入reboot
重启lede

6、通过web 访问192.168.1.2进行配置lede，默认密码 koolshare

7、（1）先去系统à启动项中把mwan3禁用
（2）网络---》端口，中把wan  wan6都删除
（3）Lan中基本设置：静态地址，192.168.1.2，子网掩码255.255.255.0，网关192.168.1.1，自定义DNS  192.168.1.1，在dhcp服务器中勾选忽略此端口，保存应用。
物理设置中，接口选择eth0，如果增加了无线网卡得，同时也选择eth1. 只是如果通过无线网卡来做旁网关的话，没有有线快，网络信号好的话，也是没太大影响。
然后重启lede

8、通过以上设置，此时lede应该就可以联网了的，可以安装插件了。
此时如果不去R7K 中设置的话，大家只能给想要以lede作为网关的设备自定义ip和网关就可以使用lede的各种插件功能了。其他没有自定的就继续使用R7K 来进行上网（没有使用LEDE的各种插件功能，好处是电脑LEDE关机或出问题不影响原来的网络使用），以下是手动设定的图


9、当然我们也可以通过设置R7K 的DHCP中的默认网关为192.168.1.2，让所有设备自动获取ip同时自动使用lede作为网关。方法就是登陆R7K 192.168.1.1，然后lan—》dhcp  默认网关中填写  192.168.1.2.保存应用即可。至此，所有设备通过无线或者有线自动获取IP上网的都将通过X230虚拟机中的LEDE进行KP等。（此时如果电脑或者lede出问题，则所有设备都无法上网，只需要登录R7K 把DHCP的默认网关改为192.168.1.1或者清空保存即可，所有网络就又可以上网了），完美